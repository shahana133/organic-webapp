{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm p-4">
        <h4 class="mb-3">Cancel Order #{{ order.id }}</h4>
        <p><strong>Date:</strong> {{ order.created_at|date:"M d, Y H:i" }}</p>
        <p><strong>Total:</strong> ₹{{ order.total_amount }}</p>
        <p><strong>Status:</strong> {{ order.status }}</p>
        <p><strong>Payment:</strong> {{ order.payment_method }}</p>
        <p><strong>Address:</strong> {{ order.address }}</p>

        <h5 class="mt-3">Products in this Order:</h5>
        <ul>
            {% for product in order.products.all %}
                <li>{{ product.name }} - ₹{{ product.price }}</li>
            {% endfor %}
        </ul>

        {% if order.status == "Pending" %}
            <div class="alert alert-warning mt-3">
                Are you sure you want to cancel this order?
            </div>
            <form method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Yes, Cancel Order</button>
                <a href="/cancelorder/" class="btn btn-secondary">No, Go Back</a>
            </form>
        {% else %}
            <div class="alert alert-info mt-3">
                This order cannot be cancelled as it is already <strong>{{ order.status }}</strong>.
            </div>
            <a href="/myorders/{{order.id}}/" class="btn btn-primary">Back to My Orders</a>
        {% endif %}
    </div>
</div>
{% endblock %}
